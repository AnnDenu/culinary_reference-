# Кулинарный справочник

Веб-приложение для управления рецептами с системой модерации, комментариями и административной панелью.

## Технологии

- **Backend**: Laravel 11
- **PHP**: 8.2+
- **База данных**: MySQL
- **Frontend**: Tailwind CSS, Alpine.js
- **Сборка**: Vite
- **Аутентификация**: Laravel Breeze
- **Экспорт данных**:  Excel

## Основной функционал

### Для пользователей

- Регистрация и аутентификация
- Создание, редактирование и удаление рецептов
- Добавление ингредиентов и шагов приготовления к рецептам
- Просмотр рецептов с фильтрацией по категориям
- Комментирование рецептов
- Добавление рецептов в избранное
- Просмотр истории просмотров рецептов
- Управление профилем
- Просмотр уведомлений о статусе рецептов

### Для администраторов

- Модерация рецептов (одобрение/отклонение)
- Управление пользователями (изменение ролей, блокировка)
- Управление категориями
- Модерация ингредиентов
- Просмотр и управление комментариями
- Экспорт данных в Excel:
  - Экспорт рецептов
  - Экспорт комментариев
  - Экспорт просмотров рецептов
  - Экспорт действий пользователей

## Структура базы данных

### Основные модели

- **User** - пользователи (роли: user, admin, moderator)
- **Recipe** - рецепты (статусы: pending, approved, rejected)
- **Category** - категории рецептов
- **Ingredient** - ингредиенты рецептов
- **RecipeStep** - шаги приготовления
- **Comment** - комментарии к рецептам
- **Favorite** - избранные рецепты
- **RecipeView** - история просмотров рецептов
- **History** - история действий пользователя
- **Activity** - активность пользователей
- **Notification** - уведомления

### Поля рецепта

- Название, описание
- Время приготовления
- Сложность (easy, medium, hard)
- Количество порций
- Изображение
- Калорийность, белки, жиры, углеводы
- Категория
- Статус модерации
- Причина отклонения (если отклонен)

## Установка

1. Клонировать репозиторий
2. Установить зависимости:
   ```bash
   composer install
   npm install
   ```
3. Настроить окружение:
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```
4. Создать базу данных SQLite:
   ```bash
   touch database/database.sqlite
   ```
5. Выполнить миграции:
   ```bash
   php artisan migrate
   ```
6. Запустить сидеры (опционально):
   ```bash
   php artisan db:seed
   ```
7. Собрать фронтенд:
   ```bash
   npm run build
   ```
8. Запустить сервер разработки:
   ```bash
   php artisan serve
   ```

## Разработка

### Запуск в режиме разработки

```bash
# Терминал 1 - Laravel сервер
php artisan serve

# Терминал 2 - Vite dev server
npm run dev
```

### Тестирование

```bash
php artisan test
```

### Форматирование кода

```bash
./vendor/bin/pint
```

## Структура проекта

```
app/
├── Exports/          # Классы экспорта в Excel
├── Http/
│   ├── Controllers/  # Контроллеры приложения
│   ├── Middleware/  # Middleware
│   └── Requests/    # Form Request валидация
├── Models/           # Eloquent модели
├── Notifications/    # Уведомления
└── View/             # Blade компоненты

database/
├── migrations/       # Миграции базы данных
├── seeders/          # Сидеры для тестовых данных
└── factories/        # Фабрики для тестов

resources/
├── views/            # Blade шаблоны
├── css/              # Стили
└── js/               # JavaScript файлы

routes/
├── web.php           # Веб-маршруты
└── auth.php          # Маршруты аутентификации
```

## Маршруты

### Публичные

- `/` - главная страница
- `/recipes` - каталог рецептов
- `/recipes/{id}` - просмотр рецепта
- `/catalog` - каталог
- `/about` - о проекте

### Требующие аутентификации

- `/dashboard` - панель пользователя
- `/profile` - профиль пользователя
- `/profile/recipes` - мои рецепты
- `/profile/history` - история просмотров
- `/profile/notifications` - уведомления
- `/recipes/create` - создание рецепта
- `/recipes/{id}/edit` - редактирование рецепта

### Административные

- `/admin` - главная страница админ-панели
- `/admin/recipes` - управление рецептами
- `/admin/users` - управление пользователями
- `/admin/categories` - управление категориями
- `/admin/comments` - управление комментариями
- `/admin/ingredients` - управление ингредиентами
- `/admin/reports/*` - экспорт отчетов

## Роли пользователей

- **user** - обычный пользователь (по умолчанию)
- **admin** - администратор с полным доступом
- **moderator** - модератор (ограниченные права)
